{% extends 'base.html' %}

{% block title %}{{ package.title }} - Pilgrim Packages{% endblock %}

{% block content %}
<div class="container mb-5">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-white px-3 py-2 rounded">
            <li class="breadcrumb-item"><a href="{{ url_for('main.home') }}">Home</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('main.packages') }}">Packages</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ package.title }}</li>
        </ol>
    </nav>
    <div class="row">
        <div class="col-lg-6 mb-4">
            <div id="packageCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner rounded-4 shadow">
                    <div class="carousel-item active">
                        <img src="{{ package.image }}" alt="{{ package.title }}" class="d-block w-100" style="max-height:340px;object-fit:cover;" loading="lazy">
                    </div>
                    {% if package.gallery_images %}
                        {% for image in package.gallery_images.split(',') %}
                            <div class="carousel-item">
                                <img src="{{ image.strip() }}" alt="{{ package.title }}" class="d-block w-100" style="max-height:340px;object-fit:cover;" loading="lazy">
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
                {% if package.gallery_images %}
                    <button class="carousel-control-prev" type="button" data-bs-target="#packageCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#packageCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                {% endif %}
            </div>
        </div>
        <div class="col-lg-6">
            <h1 class="fw-bold text-primary mb-2">{{ package.title }}</h1>
            <div class="mb-2">
                <span class="fs-4 fw-bold text-dark">â‚¹{{ package.price }}</span>
            </div>
            <div class="mb-3">
                <span class="badge bg-success me-2">{{ package.duration }}</span>
                <span class="badge bg-info text-dark">{{ package.destination }}</span>
            </div>
            <div class="mb-3">
                <button class="btn btn-success btn-sm me-2"><i class="bi bi-whatsapp"></i> WhatsApp</button>
                <button class="btn btn-primary btn-sm me-2"><i class="bi bi-telephone"></i> Call</button>
                <button class="btn btn-warning text-white me-2">Get Quotes</button>
                <a href="#contact-us" class="btn btn-outline-primary">Book Now</a>
            </div>
            <div class="mb-3">
                <span class="me-3"><i class="bi bi-egg-fried"></i> Meals</span>
                <span class="me-3"><i class="bi bi-truck"></i> Transfer</span>
                <span class="me-3"><i class="bi bi-building"></i> Hotel</span>
                <span class="me-3"><i class="bi bi-binoculars"></i> Sightseeing</span>
            </div>
            <p class="lead">{{ package.overview }}</p>
            {% if package.highlights %}
                <h5 class="fw-bold mb-2">Highlights</h5>
                <ul>
                    {% for highlight in package.highlights.split('\n') %}
                        <li>{{ highlight }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-lg-8">
            {% if package.video_url %}
                <div class="mb-4">
                    <h3 class="fw-bold mb-3">Video</h3>
                    <div class="ratio ratio-16x9">
                        <iframe src="{{ package.video_url }}" title="Package Video" allowfullscreen></iframe>
                    </div>
                </div>
            {% endif %}
            <h3 class="fw-bold mb-3">Itinerary</h3>
            <ul class="list-group mb-4">
                {% for line in package.itinerary.split('\n') %}
                <li class="list-group-item">{{ line }}</li>
                {% endfor %}
            </ul>
            {% if package.itinerary_days %}
                <h4 class="fw-bold mb-2">Detailed Itinerary</h4>
                <div class="mb-4">
                    {{ package.itinerary_days | safe }}
                </div>
            {% endif %}
            <h4 class="fw-bold mb-2">Inclusions</h4>
            <ul>
                {% for line in package.inclusions.split('\n') %}
                <li>{{ line }}</li>
                {% endfor %}
            </ul>
            <h4 class="fw-bold mb-2">Exclusions</h4>
            <ul>
                {% for line in package.exclusions.split('\n') %}
                <li>{{ line }}</li>
                {% endfor %}
            </ul>
            {% if package.accommodation_details %}
                <h4 class="fw-bold mb-2">Accommodation Details</h4>
                <p>{{ package.accommodation_details }}</p>
            {% endif %}
            {% if package.transportation_details %}
                <h4 class="fw-bold mb-2">Transportation Details</h4>
                <p>{{ package.transportation_details }}</p>
            {% endif %}
            {% if package.cancellation_policy %}
                <h4 class="fw-bold mb-2">Cancellation Policy</h4>
                <p>{{ package.cancellation_policy }}</p>
            {% endif %}
            {% if package.terms_conditions %}
                <h4 class="fw-bold mb-2">Terms & Conditions</h4>
                <p>{{ package.terms_conditions }}</p>
            {% endif %}
            {% if package.map_location %}
                <h4 class="fw-bold mb-2">Location Map</h4>
                <div class="mb-4">
                    {{ package.map_location | safe }}
                </div>
            {% endif %}
        </div>
        <div class="col-lg-4">
            <div class="card shadow rounded-4 mb-4">
                <div class="card-body">
                    <h5 class="fw-bold mb-2 text-primary">Quick Info</h5>
                    <ul class="list-unstyled mb-2">
                        <li><strong>Duration:</strong> {{ package.duration }}</li>
                        <li><strong>Best Time:</strong> {{ package.best_time }}</li>
                        <li><strong>Starting Point:</strong> {{ package.destination }}</li>
                        <li><strong>Group Size:</strong> {{ package.group_size }}</li>
                    </ul>
                    <a href="#contact-us" class="btn btn-primary w-100 rounded-pill">Enquire Now</a>
                </div>
            </div>
            <div class="card shadow rounded-4">
                <div class="card-body">
                    <h5 class="fw-bold mb-2 text-primary">Need Help?</h5>
                    <p class="mb-1">Call: <a href="tel:+918282824999" class="text-primary">+91 8282824999</a></p>
                    <p class="mb-1">Email: <a href="mailto:sales@pilgrimpackages.com" class="text-primary">sales@pilgrimpackages.com</a></p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
